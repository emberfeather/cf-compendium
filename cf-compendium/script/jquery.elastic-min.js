(function(e){e.fn.extend({elastic:function(){var f=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){function k(){curatedWidth=Math.floor(parseInt(a.width(),10));b.width()!==curatedWidth&&
(b.css({width:curatedWidth+"px"}),c(!0))}function h(b,c){var d=Math.floor(parseInt(b,10));a.height()!==d&&(a.css({height:d+"px",overflow:c}),a.trigger("resize"))}function c(c){var e=a.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),f=b.html().replace(/<br>/ig,"<br />");if(c||e+"&nbsp;"!==f)b.html(e+"&nbsp;"),Math.abs(b.height()+i-a.height())>3&&(c=b.height()+i,c>=d?h(d,"auto"):c<=g?h(g,"hidden"):h(c,"hidden"))}if(this.type!=="textarea")return!1;
var a=e(this),b=e("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),i=parseInt(a.css("line-height"),10)||parseInt(a.css("font-size"),"10"),g=parseInt(a.css("height"),10)||i*3,d=parseInt(a.css("max-height"),10)||Number.MAX_VALUE;if(d<0)d=Number.MAX_VALUE;b.appendTo(a.parent());for(var j=f.length;j--;)b.css(f[j].toString(),a.css(f[j].toString()));a.css({overflow:"hidden"});a.bind("keyup change cut paste",function(){c()});$(window).bind("resize",k);a.bind("resize",k);a.bind("update",
c);a.bind("blur",function(){b.height()<d&&(b.height()>g?a.height(b.height()):a.height(g))});a.bind("input paste",function(){setTimeout(c,250)});c()})}})})(jQuery);
