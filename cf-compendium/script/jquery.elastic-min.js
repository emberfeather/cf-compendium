(function(l){jQuery.fn.extend({elastic:function(){var f="paddingTop,paddingRight,paddingBottom,paddingLeft,fontSize,lineHeight,fontFamily,width,fontWeight,border-top-width,border-right-width,border-bottom-width,border-left-width,borderTopStyle,borderTopColor,borderRightStyle,borderRightColor,borderBottomStyle,borderBottomColor,borderLeftStyle,borderLeftColor".split(",");return this.each(function(){function k(){var d=Math.floor(parseInt(a.width(),10));b.width()!==d&&(b.css({width:d+"px"}),c(!0))}function h(b,
c){var e=Math.floor(parseInt(b,10));a.height()!==e&&a.css({height:e+"px",overflow:c})}function c(d){var c=a.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),f=b.html().replace(/<br>/ig,"<br />");if(d||c+"&nbsp;"!==f)b.html(c+"&nbsp;"),Math.abs(b.height()+i-a.height())>3&&(d=b.height()+i,d>=e?h(e,"auto"):d<=g?h(g,"hidden"):h(d,"hidden"))}if(this.type!=="textarea")return!1;var a=jQuery(this),b=jQuery("<div />").css({position:"absolute",display:"none",
"word-wrap":"break-word","white-space":"pre-wrap"}),i=parseInt(a.css("line-height"),10)||parseInt(a.css("font-size"),"10"),g=parseInt(a.css("height"),10)||i*3,e=parseInt(a.css("max-height"),10)||Number.MAX_VALUE;if(e<0)e=Number.MAX_VALUE;b.appendTo(a.parent());for(var j=f.length;j--;)b.css(f[j].toString(),a.css(f[j].toString()));a.css({overflow:"hidden"});a.bind("keyup change cut paste",function(){c()});l(window).bind("resize",k);a.bind("resize",k);a.bind("update",c);a.bind("blur",function(){b.height()<
e&&(b.height()>g?a.height(b.height()):a.height(g))});a.bind("input paste",function(){setTimeout(c,250)});c()})}})})(jQuery);
