(function(d){function m(){var a;a=d(this);if(!a.data("timeago")){a.data("timeago",{datetime:g.datetime(a)});var b=d.trim(a.text());b.length>0&&a.attr("title",b)}a=a.data("timeago");isNaN(a.datetime)||d(this).text(h(a.datetime));return this}function h(a){return g.inWords((new Date).getTime()-a.getTime())}d.timeago=function(a){return a instanceof Date?h(a):typeof a==="string"?h(d.timeago.parse(a)):h(d.timeago.datetime(a))};var g=d.timeago;d.extend(d.timeago,{settings:{refreshMillis:6E4,allowFuture:false,
strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(a){function b(k,l){return(d.isFunction(k)?k(l,a):k).replace(/%d/i,c.numbers&&c.numbers[l]||l)}var c=this.settings.strings,n=c.prefixAgo,o=c.suffixAgo;if(this.settings.allowFuture){if(a<
0){n=c.prefixFromNow;o=c.suffixFromNow}a=Math.abs(a)}var e=a/1E3,i=e/60,j=i/60,f=j/24,p=f/365;e=e<45&&b(c.seconds,Math.round(e))||e<90&&b(c.minute,1)||i<45&&b(c.minutes,Math.round(i))||i<90&&b(c.hour,1)||j<24&&b(c.hours,Math.round(j))||j<48&&b(c.day,1)||f<30&&b(c.days,Math.floor(f))||f<60&&b(c.month,1)||f<365&&b(c.months,Math.floor(f/30))||p<2&&b(c.year,1)||b(c.years,Math.floor(p));return d.trim([n,e,o].join(" "))},parse:function(a){a=d.trim(a);a=a.replace(/\.\d\d\d+/,"");a=a.replace(/-/,"/").replace(/-/,
"/");a=a.replace(/T/," ").replace(/Z/," UTC");a=a.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(a)},datetime:function(a){a=d(a).get(0).tagName.toLowerCase()=="time"?d(a).attr("datetime"):d(a).attr("title");return g.parse(a)}});d.fn.timeago=function(){var a=this;a.each(m);var b=g.settings;b.refreshMillis>0&&setInterval(function(){a.each(m)},b.refreshMillis);return a};document.createElement("abbr");document.createElement("time")})(jQuery);
